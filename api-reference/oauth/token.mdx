---
title: "Token Endpoint"
description: "Exchange authorization codes or refresh tokens"
---

<Endpoint method="POST" path="/api/v1/oauth/token" />

Exchange authorization codes for access tokens, or refresh expired access tokens using refresh tokens. Supports Authorization Code and Refresh Token grant types.

## Request

<ParamField header="Content-Type" type="string" required>
Must be `application/x-www-form-urlencoded` or `application/json`.
</ParamField>

<ParamField body="grant_type" type="string" required>
OAuth grant type. Values: `authorization_code` or `refresh_token`.
</ParamField>

<ParamField body="client_id" type="string" required>
OAuth client identifier provided during client registration.
</ParamField>

<ParamField body="client_secret" type="string" required>
OAuth client secret provided during client registration.
</ParamField>

## Authorization Code Grant

Exchange an authorization code for access and refresh tokens.

<ParamField body="code" type="string" required>
Authorization code received from the authorization endpoint. Valid for 10 minutes.
</ParamField>

<ParamField body="redirect_uri" type="string" required>
Redirect URI used in the authorization request. Must match exactly.
</ParamField>

<RequestExample>
```bash cURL - Authorization Code Grant
curl -X POST 'https://api.casexchange.com/api/v1/oauth/token' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d 'grant_type=authorization_code' \
  -d 'code=auth_code_abc123def456ghi789' \
  -d 'redirect_uri=https://myapp.com/callback' \
  -d 'client_id=client_1234567890abcdef' \
  -d 'client_secret=secret_abcdef1234567890'
```
</RequestExample>

<ResponseExample>
```json Success (200 OK)
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyX2lkIiwiaWF0IjoxNjE2MjM5MDIyfQ...",
  "token_type": "Bearer",
  "expires_in": 900,
  "refresh_token": "rt_abc123def456ghi789jkl012mno345pqr678stu901vwx234yz",
  "scope": "openid email profile cases:read cases:write"
}
```
</ResponseExample>

## Refresh Token Grant

Exchange a refresh token for a new access token.

<ParamField body="refresh_token" type="string" required>
Refresh token received from a previous token exchange.
</ParamField>

<RequestExample>
```bash cURL - Refresh Token Grant
curl -X POST 'https://api.casexchange.com/api/v1/oauth/token' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d 'grant_type=refresh_token' \
  -d 'refresh_token=rt_abc123def456ghi789jkl012mno345pqr678stu901vwx234yz' \
  -d 'client_id=client_1234567890abcdef' \
  -d 'client_secret=secret_abcdef1234567890'
```
</RequestExample>

<ResponseExample>
```json Success (200 OK)
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyX2lkIiwiaWF0IjoxNjE2MjM5MDIyfQ...",
  "token_type": "Bearer",
  "expires_in": 900,
  "refresh_token": "rt_new_refresh_token_xyz789abc123def456",
  "scope": "openid email profile cases:read cases:write"
}
```
</ResponseExample>

<ResponseExample>
```json Error - Invalid Grant (400 Bad Request)
{
  "error": "invalid_grant",
  "error_description": "The authorization code has expired or is invalid"
}
```
</ResponseExample>

<ResponseExample>
```json Error - Invalid Client (401 Unauthorized)
{
  "error": "invalid_client",
  "error_description": "Client authentication failed"
}
```
</ResponseExample>

## Response Fields

<ResponseField name="access_token" type="string" required>
JWT access token. Use this in the `Authorization: Bearer` header for API requests.
</ResponseField>

<ResponseField name="token_type" type="string" required>
Token type. Always `Bearer`.
</ResponseField>

<ResponseField name="expires_in" type="integer" required>
Number of seconds until the access token expires. Typically 900 (15 minutes).
</ResponseField>

<ResponseField name="refresh_token" type="string">
Refresh token for obtaining new access tokens. Provided on initial authorization code exchange and refresh token grant.
</ResponseField>

<ResponseField name="scope" type="string">
Space-separated list of scopes granted to the access token.
</ResponseField>

## Example: Complete OAuth Flow

```javascript Node.js
async function exchangeAuthorizationCode(code, redirectUri, clientId, clientSecret) {
  const params = new URLSearchParams({
    grant_type: 'authorization_code',
    code: code,
    redirect_uri: redirectUri,
    client_id: clientId,
    client_secret: clientSecret
  });

  const response = await fetch('https://api.casexchange.com/api/v1/oauth/token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    },
    body: params
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error_description || 'Token exchange failed');
  }

  return await response.json();
}

async function refreshAccessToken(refreshToken, clientId, clientSecret) {
  const params = new URLSearchParams({
    grant_type: 'refresh_token',
    refresh_token: refreshToken,
    client_id: clientId,
    client_secret: clientSecret
  });

  const response = await fetch('https://api.casexchange.com/api/v1/oauth/token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    },
    body: params
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error_description || 'Token refresh failed');
  }

  return await response.json();
}

const tokens = await exchangeAuthorizationCode(
  'auth_code_abc123def456ghi789',
  'https://myapp.com/callback',
  'client_1234567890abcdef',
  'secret_abcdef1234567890'
);

console.log('Access token expires in:', tokens.expires_in, 'seconds');
console.log('Scopes:', tokens.scope);
```

<Warning>
Always send `client_secret` over TLS. Never expose client secrets in browser code or client-side applications. Use the Authorization Code flow with PKCE for public clients.
</Warning>

<Note>
Refresh tokens are rotated when issuing new ones. Store the new refresh token and discard the old one. The `expires_in` value is measured in seconds (typically 900 for 15 minutes).
</Note>

