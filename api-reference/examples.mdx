---
title: "API Examples"
description: "Representative request and response examples for common CaseXchange workflows"
---

## Request examples

The endpoint pages generated from OpenAPI provide the complete schemas and status codes. This page adds practical request sequences you can adapt for integrations.

### Login and fetch current user

```bash
curl -X POST "https://api.casexchange.com/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "integration-user@example.com",
    "password": "REPLACE_ME"
  }'
```

Expected `200` response shape:

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "9f1c1f5d-8f0a-4ae0-91f7-7f0f1d71fd10",
      "email": "integration-user@example.com",
      "firstName": "Pat",
      "lastName": "Lee",
      "role": "member"
    },
    "accessToken": "eyJ...",
    "refreshToken": "..."
  }
}
```

Use the returned token:

```bash
curl "https://api.casexchange.com/api/v1/auth/me" \
  -H "Authorization: Bearer eyJ..."
```

### List cases with filters and pagination

```bash
curl "https://api.casexchange.com/api/v1/cases?page=1&limit=20&view=sent&status=sent,received&sort=updatedAt&order=desc" \
  -H "Authorization: Bearer eyJ..."
```

Expected `200` response shape:

```json
{
  "success": true,
  "data": [
    {
      "id": "3c9b9ef8-2c31-4c65-a2ed-627c4699af0d",
      "referenceNumber": "CX-ABC123",
      "status": "sent",
      "title": "Client Injury Case"
    }
  ],
  "pagination": {
    "total": 124,
    "page": 1,
    "limit": 20,
    "totalPages": 7
  }
}
```

### Create a case referral

Use the autogenerated endpoint page for the exact request schema (`POST /cases`). The payload varies by required fields in `CreateCaseRequest`.

```bash
curl -X POST "https://api.casexchange.com/api/v1/cases" \
  -H "Authorization: Bearer eyJ..." \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Client Injury Case",
    "caseType": "personal_injury",
    "jurisdiction": "CA",
    "clientFirstName": "John",
    "clientLastName": "Doe",
    "referentFirmId": "11111111-1111-1111-1111-111111111111"
  }'
```

Expected response:

- `201 Created` with `ApiResponse_CaseDetail`
- `400 Bad Request` for validation errors
- `401 Unauthorized` for missing/expired token
- `404 Not Found` if the referent firm does not exist

### Re-refer a case after rejection or withdrawal

```bash
curl -X POST "https://api.casexchange.com/api/v1/cases/3c9b9ef8-2c31-4c65-a2ed-627c4699af0d/re-refer" \
  -H "Authorization: Bearer eyJ..." \
  -H "Content-Type: application/json" \
  -d '{
    "referentFirmId": "22222222-2222-2222-2222-222222222222",
    "notes": "Client requested an alternate firm"
  }'
```

Expected responses:

- `201 Created` when a new referral is created
- `400 Bad Request` if the case is not in a re-referable state
- `403 Forbidden` if the caller does not own the case or lacks firm relationships
- `409 Conflict` if an active referral to that firm already exists

### Validate a CSV before importing

```bash
curl -X POST "https://api.casexchange.com/api/v1/csv/validate" \
  -H "Authorization: Bearer eyJ..." \
  -F "file=@cases.csv"
```

Expected response:

- `200 OK` with validation results in `data.validation`
- `400 Bad Request` if the file is malformed or missing

### Evaluate routing rules

```bash
curl -X POST "https://api.casexchange.com/api/v1/routing/evaluate-api" \
  -H "Authorization: Bearer eyJ..." \
  -H "Content-Type: application/json" \
  -d '{
    "severity": 1,
    "caseType": "personal_injury",
    "jurisdiction": "CA"
  }'
```

Expected response:

- `200 OK` with `ApiResponse_RoutingEvaluationResult`
- `400 Bad Request` for invalid enum values or missing fields
- `403 Forbidden` when the caller is not allowed to evaluate routing

## Example error payload (shared)

Most validation/permission/auth failures follow the same shape:

```json
{
  "success": false,
  "error": {
    "code": "validation_error",
    "message": "Request validation failed",
    "details": [
      {
        "field": "referentFirmId",
        "message": "must be a valid UUID"
      }
    ]
  },
  "message": null
}
```

See `/api-reference/error-handling` for retry guidance and common remediations.
