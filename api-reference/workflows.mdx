---
title: "Integration Workflows"
description: "End-to-end flows that combine multiple endpoints in the OpenAPI schema"
---

## Common workflows

This page maps real integration flows to the autogenerated endpoint docs.

### 1. JWT session bootstrap

1. `POST /auth/login` to obtain an access token (and refresh context where applicable).
2. `GET /auth/me` to confirm user role and firm context.
3. Store the access token securely for API calls.
4. Call `POST /auth/refresh-session` before or after token expiry, depending on your client architecture.
5. `POST /auth/logout` when ending an interactive session.

Implementation tip:

- Call `GET /auth/me` immediately after login to verify the integration is connected to the expected firm and role.

### 2. Case creation and referral lifecycle

1. `POST /cases` to create a new case referral (or draft depending on payload/business rules).
2. `GET /cases` to list and monitor case state changes.
3. `GET /cases/{id}` for full detail, related documents, and status history.
4. `PUT /cases/{id}` to update editable fields (not status transitions).
5. Use status/action endpoints (for example `/send`, `/acknowledge-receipt`, `/begin-investigating`, `/mark-won`, `/close`) to move through the lifecycle.
6. `POST /cases/{id}/re-refer` when a prior referral is rejected or withdrawn and business rules allow a new referral.

Implementation tips:

- Treat lifecycle transitions as separate actions, not generic updates.
- Handle `403` and `409` carefully on re-referral and ownership-sensitive actions.

### 3. Status updates and documents

1. `GET /cases/{id}/status-updates` to fetch status history.
2. `POST /cases/{id}/status-updates` to append a manual status update.
3. `GET /cases/{id}/documents` to list case documents.
4. `POST /cases/{id}/documents` to upload a new document.
5. `GET /documents/{id}/download` to fetch a secure download URL.

Implementation tips:

- Expect permission differences between referring and receiving firms.
- Use the secure download URL response rather than assuming direct object storage paths.

### 4. CSV-assisted case intake

1. `GET /csv/template` to download the expected import template.
2. `POST /csv/validate` to validate files before import.
3. `POST /cases/bulk-import` to import validated rows.
4. Review per-row results in the import response to reconcile failures.

Implementation tips:

- Always run validation before import in user-facing flows.
- Surface row-level validation errors to reduce support volume.

### 5. Integrations and routing

1. `GET /integrations` or `GET /integrations/{firmId}` to inspect current integration config.
2. `PUT /integrations` or `PUT /integrations/{firmId}` to update settings.
3. For Case Status:
   - `GET /integrations/case-status/status/{firmId}`
   - `POST /cases/{id}/link-cs`
   - `POST /cases/{id}/sync-cs`
4. For Salesforce:
   - `GET /integrations/salesforce/oauth/start`
   - `GET /integrations/salesforce/oauth/callback`
   - `POST /integrations/salesforce/sync` (or `/sync/{firmId}`)
5. `POST /routing/evaluate-api` to test or automate routing decisions for the authenticated firm context.

Implementation tips:

- Handle `302` redirects in server-side integration flows.
- Expect upstream/service failures on sync endpoints and retry with backoff where appropriate.
